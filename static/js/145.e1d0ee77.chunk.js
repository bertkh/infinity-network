"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[145],{6145:function(n,t,e){e.r(t),e.d(t,{default:function(){return H}});var o=e(3430),i=e(2791),a=e(6222),s=e(1694),c=e.n(s);function r(n,t,e){var o=(e||{}).atBegin;return function(n,t,e){var o,i=e||{},a=i.noTrailing,s=void 0!==a&&a,c=i.noLeading,r=void 0!==c&&c,l=i.debounceMode,p=void 0===l?void 0:l,d=!1,u=0;function m(){o&&clearTimeout(o)}function h(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];var c=this,l=Date.now()-u;function h(){u=Date.now(),t.apply(c,i)}function g(){o=void 0}d||(r||!p||o||h(),m(),void 0===p&&l>n?r?(u=Date.now(),s||(o=setTimeout(p?g:h,n))):h():!0!==s&&(o=setTimeout(p?g:h,void 0===p?n-l:n)))}return h.cancel=function(n){var t=(n||{}).upcomingOnly,e=void 0!==t&&t;m(),d=!e},h}(n,t,{debounceMode:!1!==(void 0!==o&&o)})}var l=e(1818),p=e(1929),d=e(1113),u=e(1178),m=e(5564),h=e(9922),g=e(7521),f=new u.E4("antSpinMove",{to:{opacity:1}}),v=new u.E4("antRotate",{to:{transform:"rotate(405deg)"}}),S=function(n){var t,e,o,i,s;return(0,a.Z)({},"".concat(n.componentCls),Object.assign(Object.assign({},(0,g.Wf)(n)),(s={position:"absolute",display:"none",color:n.colorPrimary,textAlign:"center",verticalAlign:"middle",opacity:0,transition:"transform ".concat(n.motionDurationSlow," ").concat(n.motionEaseInOutCirc),"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":(i={position:"relative"},(0,a.Z)(i,"> div > ".concat(n.componentCls),(o={position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:n.contentHeight},(0,a.Z)(o,"".concat(n.componentCls,"-dot"),{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-n.spinDotSize/2}),(0,a.Z)(o,"".concat(n.componentCls,"-text"),{position:"absolute",top:"50%",width:"100%",paddingTop:(n.spinDotSize-n.fontSize)/2+2,textShadow:"0 1px 2px ".concat(n.colorBgContainer)}),(0,a.Z)(o,"&".concat(n.componentCls,"-show-text ").concat(n.componentCls,"-dot"),{marginTop:-n.spinDotSize/2-10}),(0,a.Z)(o,"&-sm",(t={},(0,a.Z)(t,"".concat(n.componentCls,"-dot"),{margin:-n.spinDotSizeSM/2}),(0,a.Z)(t,"".concat(n.componentCls,"-text"),{paddingTop:(n.spinDotSizeSM-n.fontSize)/2+2}),(0,a.Z)(t,"&".concat(n.componentCls,"-show-text ").concat(n.componentCls,"-dot"),{marginTop:-n.spinDotSizeSM/2-10}),t)),(0,a.Z)(o,"&-lg",(e={},(0,a.Z)(e,"".concat(n.componentCls,"-dot"),{margin:-n.spinDotSizeLG/2}),(0,a.Z)(e,"".concat(n.componentCls,"-text"),{paddingTop:(n.spinDotSizeLG-n.fontSize)/2+2}),(0,a.Z)(e,"&".concat(n.componentCls,"-show-text ").concat(n.componentCls,"-dot"),{marginTop:-n.spinDotSizeLG/2-10}),e)),o)),(0,a.Z)(i,"".concat(n.componentCls,"-container"),{position:"relative",transition:"opacity ".concat(n.motionDurationSlow),"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:n.colorBgContainer,opacity:0,transition:"all ".concat(n.motionDurationSlow),content:'""',pointerEvents:"none"}}),(0,a.Z)(i,"".concat(n.componentCls,"-blur"),(0,a.Z)({clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none"},"&::after",{opacity:.4,pointerEvents:"auto"})),i)},(0,a.Z)(s,"&-tip",{color:n.spinDotDefault}),(0,a.Z)(s,"".concat(n.componentCls,"-dot"),{position:"relative",display:"inline-block",fontSize:n.spinDotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(n.spinDotSize-n.marginXXS/2)/2,height:(n.spinDotSize-n.marginXXS/2)/2,backgroundColor:n.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:f,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:v,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}}),(0,a.Z)(s,"&-sm ".concat(n.componentCls,"-dot"),{fontSize:n.spinDotSizeSM,i:{width:(n.spinDotSizeSM-n.marginXXS/2)/2,height:(n.spinDotSizeSM-n.marginXXS/2)/2}}),(0,a.Z)(s,"&-lg ".concat(n.componentCls,"-dot"),{fontSize:n.spinDotSizeLG,i:{width:(n.spinDotSizeLG-n.marginXXS)/2,height:(n.spinDotSizeLG-n.marginXXS)/2}}),(0,a.Z)(s,"&".concat(n.componentCls,"-show-text ").concat(n.componentCls,"-text"),{display:"block"}),s)))},x=(0,m.Z)("Spin",(function(n){var t=(0,h.TS)(n,{spinDotDefault:n.colorTextDescription,spinDotSize:n.controlHeightLG/2,spinDotSizeSM:.35*n.controlHeightLG,spinDotSizeLG:n.controlHeight});return[S(t)]}),{contentHeight:400}),y=function(n,t){var e={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&t.indexOf(o)<0&&(e[o]=n[o]);if(null!=n&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(n);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(n,o[i])&&(e[o[i]]=n[o[i]])}return e},C=null;var b=function(n){var t,e=n.spinPrefixCls,s=n.spinning,u=void 0===s||s,m=n.delay,h=void 0===m?0:m,g=n.className,f=n.rootClassName,v=n.size,S=void 0===v?"default":v,x=n.tip,b=n.wrapperClassName,D=n.style,j=n.children,Z=n.hashId,w=y(n,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),z=i.useState((function(){return u&&!function(n,t){return!!n&&!!t&&!isNaN(Number(t))}(u,h)})),E=(0,o.Z)(z,2),N=E[0],T=E[1];i.useEffect((function(){if(u){var n=r(h,(function(){T(!0)}));return n(),function(){var t;null===(t=null===n||void 0===n?void 0:n.cancel)||void 0===t||t.call(n)}}T(!1)}),[h,u]);var I=i.useMemo((function(){return"undefined"!==typeof j}),[j]),O=i.useContext(p.E_).direction,k=c()(e,(t={},(0,a.Z)(t,"".concat(e,"-sm"),"small"===S),(0,a.Z)(t,"".concat(e,"-lg"),"large"===S),(0,a.Z)(t,"".concat(e,"-spinning"),N),(0,a.Z)(t,"".concat(e,"-show-text"),!!x),(0,a.Z)(t,"".concat(e,"-rtl"),"rtl"===O),t),g,f,Z),P=c()("".concat(e,"-container"),(0,a.Z)({},"".concat(e,"-blur"),N)),M=(0,l.Z)(w,["indicator","prefixCls"]),X=i.createElement("div",Object.assign({},M,{style:D,className:k,"aria-live":"polite","aria-busy":N}),function(n,t){var e=t.indicator,o="".concat(n,"-dot");return null===e?null:(0,d.l$)(e)?(0,d.Tm)(e,{className:c()(e.props.className,o)}):(0,d.l$)(C)?(0,d.Tm)(C,{className:c()(C.props.className,o)}):i.createElement("span",{className:c()(o,"".concat(n,"-dot-spin"))},i.createElement("i",{className:"".concat(n,"-dot-item")}),i.createElement("i",{className:"".concat(n,"-dot-item")}),i.createElement("i",{className:"".concat(n,"-dot-item")}),i.createElement("i",{className:"".concat(n,"-dot-item")}))}(e,n),x?i.createElement("div",{className:"".concat(e,"-text")},x):null);return I?i.createElement("div",Object.assign({},M,{className:c()("".concat(e,"-nested-loading"),b,Z)}),N&&i.createElement("div",{key:"loading"},X),i.createElement("div",{className:P,key:"container"},j)):X},D=function(n){var t=n.prefixCls,e=(0,i.useContext(p.E_).getPrefixCls)("spin",t),a=x(e),s=(0,o.Z)(a,2),c=s[0],r=s[1],l=Object.assign(Object.assign({},n),{spinPrefixCls:e,hashId:r});return c(i.createElement(b,Object.assign({},l)))};D.setDefaultIndicator=function(n){C=n};var j=D,Z=e(1983),w=e(4024),z=e(2177),E=e(7437),N=e(2421),T="ChatPage_messageBlock__4bT5k",I="ChatPage_messageText__qWO4R",O=e(3164),k=e(2835),P=e(184),M=k.Z.TextArea,X=function(){var n=(0,E.TL)(),t=(0,E.CG)((function(n){return n.chat.status}));return(0,i.useEffect)((function(){return console.log("\u0441\u0442\u0430\u0440\u0442",(0,w.XW)()),n((0,N.WE)()),function(){n((0,N.R7)())}}),[n]),(0,P.jsxs)("div",{children:["error"===t&&(0,P.jsx)("div",{children:" Some error occurred. Please refresh the page "}),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(G,{}),(0,P.jsx)(_,{isAuth:!0})]})]})},G=function(){console.log(">>>Messages");var n=(0,z.v9)((function(n){return n.chat.messages})),t=(0,i.useRef)(null),e=(0,i.useState)(!0),a=(0,o.Z)(e,2),s=a[0],c=a[1];return(0,i.useEffect)((function(){s&&setTimeout((function(){var n;null===(n=t.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),500)}),[n]),(0,P.jsxs)("div",{style:{height:"500px",overflowY:"auto"},onScroll:function(n){var t=n.currentTarget,e=t.scrollHeight-t.scrollTop;Math.abs(e-t.clientHeight)<300?s||c(!0):s&&c(!1)},children:[n.map((function(n){return(0,P.jsx)(L,{message:n},n.id)})),(0,P.jsx)("div",{ref:t})]})},L=function(n){var t=n.message;return(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:T,children:[(0,P.jsx)("span",{children:(0,P.jsx)("img",{src:null!=t.photo?t.photo:O})}),(0,P.jsxs)("span",{children:[(0,P.jsxs)("div",{children:[(0,P.jsxs)("b",{children:[" ",t.userName]})," (userId: ",t.userId,")"]}),(0,P.jsx)("div",{className:I,children:t.message})]})]}),(0,P.jsx)("hr",{})]})},_=function(n){var t=n.isAuth,e=(0,i.useState)(""),a=(0,o.Z)(e,2),s=a[0],c=a[1],r=(0,z.v9)((function(n){return n.chat.status})),l=(0,z.I0)(),p="ready"!==r,d=function(){if(s){var n=new Date,t=String(n.getHours()+":"+n.getMinutes()),e="".concat(s," (").concat(t,")");e.length>100?alert("\u041c\u043e\u0436\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 100 \u0437\u043d\u0430\u043a\u043e\u0432,\n            \u0430 \u0441\u0435\u0439\u0447\u0430\u0441 \u0443\u0436\u0435 ".concat(e.length)):(console.log("\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",(0,w.XW)()),l((0,N.bG)(s)),c(""))}else alert("\u041f\u0443\u0441\u0442\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c!")};return(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{children:(0,P.jsx)(M,{style:{height:"100px",width:"1150px"},onChange:function(n){c(n.target.value)},value:s,placeholder:'Press Ctrl + Enter to send a message or button "Send".\nYou can\'t send more than 100 symbols.',onKeyPress:function(n){if(n.ctrlKey&&"Enter"===n.code){if(p)return void console.log("\u0445\u043e\u0442\u0435\u043b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 Ctrl + Enter \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f");d()}}})}),(0,P.jsx)("div",{children:t?"":"Chat works only for login users!"}),(0,P.jsx)("div",{children:p?(0,P.jsx)(j,{}):(0,P.jsx)(Z.ZP,{onClick:function(){d()},children:"Send"})})]})},H=function(){var n=(0,z.v9)(E.Jt);return(0,P.jsx)("div",{children:(0,P.jsx)("div",{children:n?(0,P.jsx)(X,{}):(0,P.jsx)(_,{isAuth:n})})})}}}]);
//# sourceMappingURL=145.e1d0ee77.chunk.js.map