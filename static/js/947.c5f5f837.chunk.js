"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[947],{1947:function(s,e,t){t.r(e),t.d(e,{default:function(){return K},withRouter:function(){return H}});var r=t(8489),i=t(7853),n=t(4531),o=t(1020),a=t(2301),l=t(2791),u=t(678),c="ProfileInfo_descriptionBlock__OZyB0",d="ProfileInfo_profilePhoto__G8I4t",h="ProfileInfo_infoBlock__HVe6R",p="ProfileInfo_mainPhoto__GL9ac",f="ProfileInfo_contact__dD54C",j=t(1471),m=t(184),x=function(s){var e=(0,l.useState)(!1),t=(0,u.Z)(e,2),r=t[0],i=t[1],n=(0,l.useState)(s.status),o=(0,u.Z)(n,2),a=o[0],c=o[1];(0,l.useEffect)((function(){c(s.status)}),[s.status]);return(0,m.jsxs)("div",{children:[!r&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Status"}),": ",(0,m.jsx)("span",{onDoubleClick:function(){i(!0)},children:s.status||"----"})]}),r&&(0,m.jsx)("div",{children:(0,m.jsx)("input",{autoFocus:!0,onBlur:function(){i(!1),s.updateUserStatus(a)},onChange:function(s){c(s.currentTarget.value)},value:a})})]})},v=t(3164),P=t(5413),b=t(704),g=t(9234),_=t(1983),k=(0,b.Z)({form:"edit-profile"})((function(s){var e=s.handleSubmit,t=s.profile,r=s.error;return(0,m.jsxs)("form",{onSubmit:e,children:[(0,m.jsx)("div",{children:(0,m.jsx)(_.ZP,{type:"primary",htmlType:"submit",children:"save"})}),r&&(0,m.jsx)("div",{className:g.Z.formSummaryError,children:r}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Full name"}),": ",(0,P.Gr)("Full name","fullName",[],P.II)]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job"}),":",(0,P.Gr)("","lookingForAJob",[],P.II,{type:"checkbox"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My professional skills"}),":",(0,P.Gr)("My professional skills","lookingForAJobDescription",[],P.gx)]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"About me"}),":",(0,P.Gr)("About me","aboutMe",[],P.gx)]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((function(s){return(0,m.jsx)("div",{className:f,children:(0,m.jsxs)("b",{children:[s,": ",(0,P.Gr)(s,"contacts."+s,[],P.II)]})},s)}))]})]})})),y=t(2835),I=function(s){var e=s.profile,t=s.isOwner,r=s.goToEditMode;return(0,m.jsxs)("div",{children:[t&&(0,m.jsx)("div",{children:(0,m.jsx)(_.ZP,{onClick:r,children:"edit"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Full name"}),": ",e.fullName]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job"}),": ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My professional skills"}),": ",e.lookingForAJobDescription]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"About me"}),": ",e.aboutMe]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Contacts"}),": ",Object.keys(e.contacts).map((function(s){return(0,m.jsx)(Z,{contactTitle:s,contactValue:e.contacts[s]},s)}))]})]})},Z=function(s){var e=s.contactTitle,t=s.contactValue;return(0,m.jsxs)("div",{className:f,children:[(0,m.jsx)("b",{children:e}),": ",t]})},S=function(s){var e=s.profile,t=s.status,r=s.updateUserStatus,i=s.isOwner,n=s.savePhoto,o=s.saveProfile,a=(0,l.useState)(!1),f=(0,u.Z)(a,2),P=f[0],b=f[1];if(!e)return(0,m.jsx)(j.Z,{});return(0,m.jsxs)("div",{className:c,children:[(0,m.jsxs)("div",{className:d,children:[(0,m.jsx)("img",{src:null!==e.photos.large?e.photos.large:v,className:p}),i&&(0,m.jsx)(y.Z,{type:"file",onChange:function(s){var e;null!==(e=s.target.files)&&void 0!==e&&e.length&&n(s.target.files[0])}})]}),(0,m.jsxs)("div",{className:h,children:[P?(0,m.jsx)(k,{initialValues:e,profile:e,onSubmit:function(s){o(s).then((function(){b(!1)}))}}):(0,m.jsx)(I,{goToEditMode:function(){b(!0)},profile:e,isOwner:i}),(0,m.jsx)(x,{status:t,updateUserStatus:r})]})]})},C=t(81),w=t(1303),A="MyPosts_postsBlock__yjzCM",U="MyPosts_posts__r45HL",N="Post_itemMessage__SYY4a",M="Post_item__l7jf-",F="Post_likesCount__+muOf",O="Post_heartImg__njkE5",T=function(){return(0,m.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,m.jsx)("path",{d:"M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"})})},D=function(s){return(0,m.jsxs)("div",{className:M,children:[(0,m.jsx)("img",{src:"https://weblinks.ru/wp-content/uploads/2021/04/3zeynnx6ija.jpg",alt:""}),(0,m.jsx)("span",{className:N,children:s.message}),(0,m.jsxs)("span",{className:F,children:[(0,m.jsx)("div",{className:O,children:(0,m.jsx)(T,{})}),s.likesCount," likes"]})]})},G=t(3079),z=(0,b.Z)({form:"profileAddNewPostForm"})((function(s){return(0,m.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,m.jsx)("div",{children:(0,P.Gr)("Your post","newPostText",[G.C],P.II)}),(0,m.jsx)("div",{children:(0,m.jsx)(_.ZP,{type:"primary",htmlType:"submit",children:"Add post"})})]})})),B=function(s){var e=(0,w.Z)(s.posts).reverse().map((function(s){return(0,m.jsx)(D,{message:s.message,likesCount:s.likesCount},s.id)}));return(0,m.jsxs)("div",{className:A,children:[(0,m.jsx)("h3",{children:"My posts"}),(0,m.jsx)(z,{onSubmit:function(e){s.addPost(e.newPostText)},message:"",likesCount:0}),(0,m.jsx)("div",{className:U,children:e})]})},E=l.memo(B),J=t(2177),L=(0,J.$j)((function(s){return{posts:s.profilePage.posts}}),{addPost:C.Nw.addPostActionCreator})(E),V=function(s){return(0,m.jsxs)("div",{children:[(0,m.jsx)(S,{savePhoto:s.savePhoto,isOwner:s.isOwner,saveProfile:s.saveProfile,profile:s.profile,status:s.status,updateUserStatus:s.updateUserStatus}),(0,m.jsx)(L,{})]})},R=t(7689),Y=t(1666),$=t(3221),q=function(s){(0,o.Z)(t,s);var e=(0,a.Z)(t);function t(){return(0,i.Z)(this,t),e.apply(this,arguments)}return(0,n.Z)(t,[{key:"refreshProfile",value:function(){var s=+this.props.match.params.userId;s||((s=this.props.authorizedUserId)||this.props.history.push("/login"),s||console.error('ID should exist in URI params or in state ("authorizedUserId")')),this.props.getUserProfile(s),this.props.getUserStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e){this.props.match&&this.props.match.params.userId!==s.match.params.userId?this.refreshProfile():this.props.match||this.props.match===s.match||this.refreshProfile()}},{key:"render",value:function(){return(0,m.jsx)(V,(0,r.Z)((0,r.Z)({saveProfile:function(s){throw new Error("Function not implemented.")}},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto}))}}]),t}(l.Component);function H(s){return function(e){var t={params:(0,R.UO)()};return(0,m.jsx)(s,(0,r.Z)((0,r.Z)({},e),{},{match:t}))}}var K=(0,Y.qC)((0,J.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{getUserProfile:C.et,getUserStatus:C.Tq,updateUserStatus:C.OL,savePhoto:C.Ju,saveProfile:C.Ii}),H,$.D)(q)},3221:function(s,e,t){t.d(e,{D:function(){return c}});var r=t(8489),i=t(3738),n=(t(2791),t(7689)),o=t(2177),a=t(184),l=["isAuth"],u=function(s){return{isAuth:s.auth.isAuth}};function c(s){return(0,o.$j)(u,{})((function(e){e.isAuth;var t=(0,i.Z)(e,l);return e.isAuth?(0,a.jsx)(s,(0,r.Z)({},t)):(0,a.jsx)(n.Fg,{to:"/login"})}))}}}]);
//# sourceMappingURL=947.c5f5f837.chunk.js.map