"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[194],{4194:function(e,t,r){r.r(t),r.d(t,{default:function(){return ee},withRouter:function(){return W}});var s=r(8489);function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=r(1352);function i(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,(0,o.Z)(s.key),s)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var c=r(9675);function l(e,t){if(t&&("object"===(0,c.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=a(e);if(t){var n=a(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return l(this,r)}}var p=r(2791),d=r(3430),h="ProfileInfo_descriptionBlock__w0dQp",j="ProfileInfo_profilePhoto__6xVry",m="ProfileInfo_infoBlock__TLYBC",x="ProfileInfo_mainPhoto__L3TaN",v="ProfileInfo_contact__cD28N",b=r(1471),y=r(184),P=function(e){var t=(0,p.useState)(!1),r=(0,d.Z)(t,2),s=r[0],n=r[1],o=(0,p.useState)(e.status),i=(0,d.Z)(o,2),u=i[0],a=i[1];(0,p.useEffect)((function(){a(e.status)}),[e.status]);return(0,y.jsxs)("div",{children:[!s&&(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"Status"}),": ",(0,y.jsx)("span",{onDoubleClick:function(){n(!0)},children:e.status||"----"})]}),s&&(0,y.jsx)("div",{children:(0,y.jsx)("input",{autoFocus:!0,onBlur:function(){n(!1),e.updateUserStatus(u)},onChange:function(e){a(e.currentTarget.value)},value:u})})]})},g=r(3164),_=r(5413),k=r(704),w=r(9234),I=r(1983),O=(0,k.Z)({form:"edit-profile"})((function(e){var t=e.handleSubmit,r=e.profile,s=e.error;return(0,y.jsxs)("form",{onSubmit:t,children:[(0,y.jsx)("div",{children:(0,y.jsx)(I.ZP,{type:"primary",htmlType:"submit",children:"save"})}),s&&(0,y.jsx)("div",{className:w.Z.formSummaryError,children:s}),(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"Full name"}),": ",(0,_.Gr)("Full name","fullName",[],_.II)]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"Looking for a job"}),":",(0,_.Gr)("","lookingForAJob",[],_.II,{type:"checkbox"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"My professional skills"}),":",(0,_.Gr)("My professional skills","lookingForAJobDescription",[],_.gx)]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"About me"}),":",(0,_.Gr)("About me","aboutMe",[],_.gx)]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"Contacts"}),": ",Object.keys(r.contacts).map((function(e){return(0,y.jsx)("div",{className:v,children:(0,y.jsxs)("b",{children:[e,": ",(0,_.Gr)(e,"contacts."+e,[],_.II)]})},e)}))]})]})})),S=r(2835),C=function(e){var t=e.profile,r=e.isOwner,s=e.goToEditMode;return(0,y.jsxs)("div",{children:[r&&(0,y.jsx)("div",{children:(0,y.jsx)(I.ZP,{onClick:s,children:"edit"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"Full name"}),": ",t.fullName]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((function(e){return(0,y.jsx)(Z,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},Z=function(e){var t=e.contactTitle,r=e.contactValue;return(0,y.jsxs)("div",{className:v,children:[(0,y.jsx)("b",{children:t}),": ",r]})},N=function(e){var t=e.profile,r=e.status,s=e.updateUserStatus,n=e.isOwner,o=e.savePhoto,i=e.saveProfile,u=(0,p.useState)(!1),a=(0,d.Z)(u,2),c=a[0],l=a[1];if(!t)return(0,y.jsx)(b.Z,{});return(0,y.jsxs)("div",{className:h,children:[(0,y.jsxs)("div",{className:j,children:[(0,y.jsx)("img",{src:null!==t.photos.large?t.photos.large:g,className:x}),n&&(0,y.jsx)(S.Z,{type:"file",onChange:function(e){var t;null!==(t=e.target.files)&&void 0!==t&&t.length&&o(e.target.files[0])}})]}),(0,y.jsxs)("div",{className:m,children:[c?(0,y.jsx)(O,{initialValues:t,profile:t,onSubmit:function(e){i(e).then((function(){l(!1)}))}}):(0,y.jsx)(C,{goToEditMode:function(){l(!0)},profile:t,isOwner:n}),(0,y.jsx)(P,{status:r,updateUserStatus:s})]})]})},U=r(81),A=r(5531),T="MyPosts_postsBlock__pgu8V",M="MyPosts_posts__x2pdn",F="Post_itemMessage__oSXuM",D="Post_item__0tn7p",E="Post_likesCount__zVxUt",B="Post_heartImg__-3joC",R=function(){return(0,y.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:(0,y.jsx)("path",{d:"M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"})})},z=function(e){return(0,y.jsxs)("div",{className:D,children:[(0,y.jsx)("img",{src:"https://weblinks.ru/wp-content/uploads/2021/04/3zeynnx6ija.jpg",alt:""}),(0,y.jsx)("span",{className:F,children:e.message}),(0,y.jsxs)("span",{className:E,children:[(0,y.jsx)("div",{className:B,children:(0,y.jsx)(R,{})}),e.likesCount," likes"]})]})},G=r(3079),J=(0,k.Z)({form:"profileAddNewPostForm"})((function(e){return(0,y.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,y.jsx)("div",{children:(0,_.Gr)("Your post","newPostText",[G.C],_.II)}),(0,y.jsx)("div",{children:(0,y.jsx)(I.ZP,{type:"primary",htmlType:"submit",children:"Add post"})})]})})),V=function(e){var t=(0,A.Z)(e.posts).reverse().map((function(e){return(0,y.jsx)(z,{message:e.message,likesCount:e.likesCount},e.id)}));return(0,y.jsxs)("div",{className:T,children:[(0,y.jsx)("h3",{children:"My posts"}),(0,y.jsx)(J,{onSubmit:function(t){e.addPost(t.newPostText)},message:"",likesCount:0}),(0,y.jsx)("div",{className:M,children:t})]})},L=p.memo(V),$=r(2177),q=(0,$.$j)((function(e){return{posts:e.profilePage.posts}}),{addPost:U.Nw.addPostActionCreator})(L),Y=function(e){return(0,y.jsxs)("div",{children:[(0,y.jsx)(N,{savePhoto:e.savePhoto,isOwner:e.isOwner,saveProfile:e.saveProfile,profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus}),(0,y.jsx)(q,{})]})},Q=r(7689),X=r(1666),H=r(3221),K=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(c,e);var t,r,o,a=f(c);function c(){return n(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"refreshProfile",value:function(){var e=+this.props.match.params.userId;e||((e=this.props.authorizedUserId)||this.props.history.push("/login"),e||console.error('ID should exist in URI params or in state ("authorizedUserId")')),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match&&this.props.match.params.userId!==e.match.params.userId?this.refreshProfile():this.props.match||this.props.match===e.match||this.refreshProfile()}},{key:"render",value:function(){return(0,y.jsx)(Y,(0,s.Z)((0,s.Z)({saveProfile:function(e){throw new Error("Function not implemented.")}},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto}))}}])&&i(t.prototype,r),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(p.Component);function W(e){return function(t){var r={params:(0,Q.UO)()};return(0,y.jsx)(e,(0,s.Z)((0,s.Z)({},t),{},{match:r}))}}var ee=(0,X.qC)((0,$.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:U.et,getUserStatus:U.Tq,updateUserStatus:U.OL,savePhoto:U.Ju,saveProfile:U.Ii}),W,H.D)(K)},3221:function(e,t,r){r.d(t,{D:function(){return l}});var s=r(8489),n=r(3738),o=(r(2791),r(7689)),i=r(2177),u=r(184),a=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}};function l(e){return(0,i.$j)(c,{})((function(t){t.isAuth;var r=(0,n.Z)(t,a);return t.isAuth?(0,u.jsx)(e,(0,s.Z)({},r)):(0,u.jsx)(o.Fg,{to:"/login"})}))}}}]);
//# sourceMappingURL=194.c2ad0baa.chunk.js.map